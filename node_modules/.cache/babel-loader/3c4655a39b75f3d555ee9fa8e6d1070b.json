{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\91790\\\\Desktop\\\\transport\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import\"antd/es/select/style\";import _Select from\"antd/es/select\";import _objectSpread from\"C:\\\\Users\\\\91790\\\\Desktop\\\\transport\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\91790\\\\Desktop\\\\transport\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useLayoutEffect}from'react';import FeatherIcon from'feather-icons-react';import{Link,NavLink}from'react-router-dom';import moment from'moment';import{useSelector,useDispatch}from'react-redux';import AddNewEvent from'./AddNewEvent';import ProjectUpdate from'./ProjectUpdate';import{Cards}from'../../../components/cards/frame/cards-frame';import{Button}from'../../../components/buttons/buttons';import'./style.css';import{eventVisible,addNewEvents,calendarDeleteData}from'../../../redux/calendar/actionCreator';import{Modal}from'../../../components/modals/antd-modals';import{Dropdown}from'../../../components/dropdown/dropdown';var WeekCalendar=function WeekCalendar(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return{events:state.Calender.events,isVisible:state.Calender.eventVisible};}),events=_useSelector.events,isVisible=_useSelector.isVisible;var _useState=useState({currentWeek:moment().week(),maxWeek:moment('12-31-2020','MM-DD-YYYY').isoWeek(),minWeek:1,year:2020,defaultValue:moment().format('YYYY-MM-DD')}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var currentWeek=state.currentWeek,maxWeek=state.maxWeek,minWeek=state.minWeek,defaultValue=state.defaultValue,year=state.year;useLayoutEffect(function(){var calenderDom=document.querySelectorAll('.ant-picker-calendar-date-content');calenderDom.forEach(function(element){element.addEventListener('click',function(e){if(e.target.classList[0]==='ant-picker-calendar-date-content'){var getDate=moment(e.currentTarget.getAttribute('title')).format('YYYY-MM-DD');setState({defaultValue:getDate,currentWeek:currentWeek,maxWeek:maxWeek,minWeek:minWeek,year:year});dispatch(eventVisible(true));}});});setState({currentWeek:currentWeek,maxWeek:maxWeek,minWeek:minWeek,defaultValue:defaultValue,year:year});},[currentWeek,maxWeek,minWeek,defaultValue,year,dispatch]);var onIncrement=function onIncrement(){return currentWeek<maxWeek?setState(_objectSpread(_objectSpread({},state),{},{currentWeek:currentWeek+1})):setState(_objectSpread(_objectSpread({},state),{},{year:year+1,currentWeek:1}));};var onDecrement=function onDecrement(){return currentWeek>minWeek?setState(_objectSpread(_objectSpread({},state),{},{currentWeek:currentWeek-1})):setState(_objectSpread(_objectSpread({},state),{},{year:year-1,currentWeek:maxWeek}));};var option=[];for(var i=minWeek;i<=maxWeek;i+=1){option.push(/*#__PURE__*/React.createElement(_Select.Option,{key:i,value:i},i));}var handleCancel=function handleCancel(){dispatch(eventVisible(false));};var addNew=function addNew(event){var arrayData=[];events.map(function(data){return arrayData.push(data.id);});var max=Math.max.apply(Math,arrayData);dispatch(addNewEvents([].concat(_toConsumableArray(events),[_objectSpread(_objectSpread({},event),{},{id:max+1})])));dispatch(eventVisible(false));};var maximumDate=function maximumDate(){return parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('DD'),10)+6<=moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).daysInMonth()?parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('DD'),10)+6:parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('DD'),10)+6-parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).daysInMonth(),10);};var daysOfMonth=moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).daysInMonth();var minimumDate=function minimumDate(){return parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('DD'),10);};var daysOfWeek=function daysOfWeek(){var days=[];if(minimumDate()+6<=daysOfMonth){for(var _i=minimumDate();_i<=maximumDate();_i+=1){days.push(\"\".concat(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('MM'),\"/\").concat(_i,\"/\").concat(year));}}else{for(var _i2=minimumDate();_i2<=daysOfMonth;_i2+=1){days.push(\"\".concat(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('MM'),\"/\").concat(_i2,\"/\").concat(year));}for(var j=1;j<=minimumDate()+6-daysOfMonth;j+=1){days.push(\"\".concat(parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('MM'),10)<12?parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('MM'),10)+1:1,\"/\").concat(j,\"/\").concat(year));}}return days;};var eventTimes=['12 AM','1 AM','2 AM','3 AM','4 AM','5 AM','6 AM','7 AM','8 AM','9 AM','10 AM','11 AM','12 PM','1 PM','2 PM','3 PM','4 PM','5 PM','6 PM','7 PM','8 PM','9 PM','10 PM','11 PM'];var onEventDelete=function onEventDelete(id){var data=events.filter(function(item){return item.id!==id;});dispatch(calendarDeleteData(data));};return/*#__PURE__*/React.createElement(Cards,{headless:true},/*#__PURE__*/React.createElement(Modal,{className:\"addEvent-modal\",footer:null,type:\"primary\",title:\"Create Event\",visible:isVisible,onCancel:handleCancel},/*#__PURE__*/React.createElement(AddNewEvent,{onHandleAddEvent:addNew,defaultValue:defaultValue})),/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-header__left\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-today\",size:\"small\",type:\"white\",outlined:true},/*#__PURE__*/React.createElement(NavLink,{to:\"./today\"},\"Today\")),/*#__PURE__*/React.createElement(\"div\",{className:\"calender-head__navigation\"},/*#__PURE__*/React.createElement(Button,{onClick:onDecrement,className:\"btn-navigate\",type:\"white\",outlined:true},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"chevron-left\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"date-label\"},\"\".concat(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('MMM DD'),\" - \").concat(parseInt(moment(moment().day('Sunday').year('2020').week(currentWeek).toDate()).format('DD'),10)+6<=moment(moment().day('Sunday').year('2020').week(currentWeek).toDate()).daysInMonth()?moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('MMM'):moment(moment().day('Sunday').year(year).week(currentWeek+1).toDate()).format('MMM'),\" \").concat(parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('DD'),10)+6<=moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).daysInMonth()?parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('DD'),10)+6:parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).format('DD'),10)+6-parseInt(moment(moment().day('Sunday').year(year).week(currentWeek).toDate()).daysInMonth(),10),\", \").concat(year)),/*#__PURE__*/React.createElement(Button,{onClick:onIncrement,className:\"btn-navigate\",type:\"white\",outlined:true},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"chevron-right\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-header__right\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"./day\"},\"Day\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"./week\"},\"Week\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"./month\"},\"Month\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"./year\"},\"Year\"))),/*#__PURE__*/React.createElement(NavLink,{className:\"schedule-list\",to:\"./schedule\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"list\"}),\"Schedule\"))),/*#__PURE__*/React.createElement(\"table\",{className:\"table-event event-week table-responsive\",width:\"100%\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"\\xA0\"),daysOfWeek().map(function(day){return/*#__PURE__*/React.createElement(\"th\",{key:day},/*#__PURE__*/React.createElement(\"p\",{className:\"week-dayName\"},moment(day).format('dddd')),/*#__PURE__*/React.createElement(\"p\",{className:moment().format('MM/DD/YYYY')===day?'week-date primary':'week-date deactivate'},moment(day).format('DD MMM')));}))),/*#__PURE__*/React.createElement(\"tbody\",null,eventTimes.map(function(time){return/*#__PURE__*/React.createElement(\"tr\",{key:time},/*#__PURE__*/React.createElement(\"td\",null,time),daysOfWeek().map(function(day){return/*#__PURE__*/React.createElement(\"td\",{key:day,className:\"ant-picker-calendar-date-content \".concat(moment().format('h A')===time&&moment().format('MM/DD/YYYY')===day?'current-data':null),title:day},moment().format('h A')===time&&moment().format('MM/DD/YYYY')===day?/*#__PURE__*/React.createElement(\"span\",{className:\"currentTime secondary\"}):null,events.map(function(event){return day===event.date[0]&&time===moment(event.time[0],'h:mm a').format('h A')&&/*#__PURE__*/React.createElement(Dropdown,{className:\"event-dropdown\",key:event.id,style:{padding:0},placement:\"bottomLeft\",content:/*#__PURE__*/React.createElement(ProjectUpdate,Object.assign({onEventDelete:onEventDelete},event)),action:['click']},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"\".concat(event.label,\" day-event-item\")},/*#__PURE__*/React.createElement(\"span\",{className:\"event-title\"},event.title),/*#__PURE__*/React.createElement(\"span\",null,\"\".concat(event.time[0],\" - \").concat(event.time[1]))));}));}));}))));};export default WeekCalendar;","map":null,"metadata":{},"sourceType":"module"}